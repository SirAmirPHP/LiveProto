# ربات مدیریت کانال تلگرام
## Telegram Channel Manager Bot

این ربات به شما امکان مدیریت کانال‌های تلگرام را می‌دهد و قابل اجرا در هاست cPanel است.

### ویژگی‌ها (Features)

- ✅ افزودن ربات به کانال با تأیید مالکیت
- ✅ مدیریت کانال‌ها با دکمه‌های شیشه‌ای
- ✅ تنظیم کپشن مخصوص هر کانال
- ✅ حذف کانال از لیست
- ✅ ذخیره‌سازی اطلاعات در فایل JSON
- ✅ ذخیره لیست کانال‌ها در فایل TXT
- ✅ پشتیبانی از وب‌هوک

### نصب و راه‌اندازی (Installation)

#### 1. ایجاد ربات در تلگرام
1. به [@BotFather](https://t.me/BotFather) پیام دهید
2. دستور `/newbot` را ارسال کنید
3. نام و نام کاربری ربات را انتخاب کنید
4. توکن ربات را کپی کنید

#### 2. آپلود فایل‌ها
1. فایل‌های زیر را در هاست cPanel آپلود کنید:
   - `bot.php` (فایل اصلی ربات)
   - `config.php` (فایل تنظیمات)
   - `reel_detector.php` (تشخیص آهنگ ریلز)

#### 3. تنظیمات
1. فایل `config.php` را ویرایش کنید:
   ```php
   define('BOT_TOKEN', 'YOUR_BOT_TOKEN_HERE');
   define('WEBHOOK_URL', 'https://yourdomain.com/bot.php');
   ```

#### 4. تنظیم وب‌هوک
1. در مرورگر به آدرس زیر بروید:
   ```
   https://yourdomain.com/bot.php?set_webhook=1
   ```
2. پیام "Webhook set" را مشاهده کنید

### نحوه استفاده (Usage)

#### افزودن ربات به کانال
1. ربات را استارت کنید: `/start`
2. روی "افزودن ربات به کانال" کلیک کنید
3. ربات را به کانال خود اضافه کنید
4. ربات را به عنوان ادمین کانال تنظیم کنید
5. فقط مالک کانال می‌تواند ربات را اضافه کند

#### مدیریت کانال‌ها
1. روی "مدیریت کانال" کلیک کنید
2. کانال مورد نظر را از لیست انتخاب کنید
3. گزینه‌های زیر در دسترس است:
   - تنظیم کپشن
   - حذف کانال

### ساختار فایل‌ها (File Structure)

```
/
├── bot.php          # فایل اصلی ربات
├── config.php       # فایل تنظیمات
├── reel_detector.php # تشخیص نام آهنگ ریلز اینستاگرام
├── database.json    # دیتابیس کانال‌ها و کپشن‌ها (خودکار ایجاد می‌شود)
├── channels.txt     # لیست شناسه‌های کانال‌ها (خودکار ایجاد می‌شود)
└── bot.log          # فایل لاگ (در صورت فعال بودن)
```

### تنظیمات پیشرفته (Advanced Settings)

در فایل `config.php` می‌توانید تنظیمات زیر را تغییر دهید:

- `MAX_CHANNELS_PER_USER`: حداکثر تعداد کانال برای هر کاربر
- `ALLOWED_IPS`: لیست IP های مجاز
- `ENABLE_LOGGING`: فعال/غیرفعال کردن لاگ
- `TIMEZONE`: منطقه زمانی

### امنیت (Security)

- ربات فقط توسط مالک کانال قابل اضافه کردن است
- هر کاربر فقط کانال‌های خود را می‌تواند مدیریت کند
- امکان محدود کردن دسترسی بر اساس IP
- لاگ تمام فعالیت‌ها

### عیب‌یابی (Troubleshooting)

#### ربات پاسخ نمی‌دهد
1. بررسی کنید که توکن ربات صحیح باشد
2. وب‌هوک به درستی تنظیم شده باشد
3. فایل‌ها در مسیر صحیح آپلود شده باشند

#### خطای دسترسی
1. مجوزهای فایل‌ها را بررسی کنید (755 برای پوشه‌ها، 644 برای فایل‌ها)
2. بررسی کنید که PHP فعال باشد

#### کانال اضافه نمی‌شود
### تشخیص آهنگ ریلز اینستاگرام

- کافیست لینک یک ریلز عمومی اینستاگرام را برای ربات ارسال کنید.
- ربات با استفاده از oEmbed اینستاگرام عنوان محتوا را دریافت و نام آهنگ/هنرمند را استخراج می‌کند.
- برای پایداری بیشتر می‌توانید `FB_APP_ID` و `FB_APP_SECRET` را در `config.php` تنظیم کنید.
- ریلزهای خصوصی یا محدودشده قابل تشخیص نیستند.

1. اطمینان حاصل کنید که مالک کانال هستید
2. ربات را به عنوان ادمین کانال تنظیم کنید
3. ربات دسترسی کامل به کانال داشته باشد

### پشتیبانی (Support)

برای پشتیبانی و گزارش باگ، لطفاً با توسعه‌دهنده تماس بگیرید.

### مجوز (License)

این پروژه تحت مجوز MIT منتشر شده است.

---

**نکته مهم**: قبل از استفاده در محیط تولید، حتماً تنظیمات امنیتی را بررسی کنید.